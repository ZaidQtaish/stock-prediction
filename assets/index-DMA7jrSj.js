(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();function p(t){const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${a}`}function l(t){const e=new Date;return e.setDate(e.getDate()-t),p(e)}const d={startDate:l(3),endDate:l(1)},c=[],u=document.getElementById("generate-report-btn");u.addEventListener("click",y);document.getElementById("ticker-input-form").addEventListener("submit",t=>{t.preventDefault();const e=document.getElementById("ticker-input");if(e.value.length>2){u.disabled=!1;const n=e.value;c.push(n.toUpperCase()),e.value="",f()}else{const n=document.getElementsByTagName("label")[0];n.style.color="red",n.textContent="You must add at least one ticker. A ticker is a 3 letter or more code for a stock. E.g TSLA for Tesla."}});function f(){const t=document.querySelector(".ticker-choice-display");t.innerHTML="",c.forEach(e=>{const n=document.createElement("span");n.textContent=e,n.classList.add("ticker"),t.appendChild(n)})}const s=document.querySelector(".loading-panel"),m=document.getElementById("api-message");async function y(){document.querySelector(".action-panel").style.display="none",s.style.display="flex";try{const t=await Promise.all(c.map(async e=>{const n=`https://api.polygon.io/v2/aggs/ticker/${e}/range/1/day/${d.startDate}/${d.endDate}?apiKey=JJkFNlFB6TAoma6H6peY9XwfelIHBEmC`,a=await fetch(n),o=await a.text();if(await a.status===200)return m.innerText="Creating report...",o;s.innerText="There was an error fetching stock data."}));g(t.join(""))}catch(t){s.innerText="There was an error fetching stock data.",console.error("error: ",t)}}async function g(t){const n=await(await fetch("https://api.mistral.ai/v1/chat/completions",{method:"POST",headers:{Authorization:"Bearer iZFm7aHjbZoJkapSa1hG8wqInIug8i6O","Content-Type":"application/json"},body:JSON.stringify({model:"mistral-tiny",messages:[{role:"user",content:`You are Dodgy Dave, a confident stock prediction bot. 
          Given the following data from the Polygon API:
          ${t}
          Provide a brief prediction based on this data. 
          Do not explain the data or mention its source.
          Just give the prediction in a confident, witty tone.
          Keep it short and to the point.`}]})})).json();h(n.choices[0].message.content)}function h(t){s.style.display="none";const e=document.querySelector(".output-panel"),n=document.createElement("p");e.appendChild(n),n.textContent=t,e.style.display="flex"}
